@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face{font-family:"Nunito";font-style:normal;font-weight:400;font-display:swap;src:url("/fonts/Nunito-400.woff2") format("woff2")}
@font-face{font-family:"Nunito";font-style:normal;font-weight:600;font-display:swap;src:url("/fonts/Nunito-600.woff2") format("woff2")}
@font-face{font-family:"Fredoka";font-style:normal;font-weight:700;font-display:swap;src:url("/fonts/Fredoka-700.woff2") format("woff2")}

/* --- Patch de sûreté : garantit l'existence de .font-display (peut être retiré plus tard) --- */
@layer utilities {
  /* Display font: Fredoka for headings via .font-display */
  .font-display { font-family: "Fredoka", system-ui, sans-serif; }
  /* Sans font: Nunito for body and UI via .font-sans */
  .font-sans { font-family: "Nunito", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; }
  /* Alias often used in components */
  .text-muted-foreground { @apply text-gray-600 dark:text-gray-300; }
}

/* --- Base typographique & layout --- */
@layer base {
  html { scroll-behavior: smooth; }
  body { @apply font-sans text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-900; }
  /* Titres unifiés (pas de classes locales sur chaque Hx) */
  h1 { @apply font-display font-bold text-4xl md:text-6xl leading-tight tracking-[0.01em]; }
  h2 { @apply font-display font-bold text-4xl md:text-[2.75rem] leading-snug tracking-tight; }
  h3 { @apply font-display font-semibold text-3xl md:text-[2.125rem]; }
  h4 { @apply font-display font-normal text-2xl md:text-[1.8rem]; }
  p  { @apply leading-7 text-[15px] md:text-base; }

  /* Rythme vertical global */
  h1, h2, h3, h4 { @apply mb-2; }
  section    { @apply py-16 md:py-24; }

  /* Liens par défaut */
  a { @apply underline-offset-2 decoration-transparent transition; }
  a:hover { @apply decoration-current; }

  ::selection { @apply bg-indigo-200 text-gray-900; }
  :root { --background: 0 0% 100%; --foreground: 0 0% 3.9%; --card: 0 0% 100%; --card-foreground: 0 0% 3.9%; --popover: 0 0% 100%; --popover-foreground: 0 0% 3.9%; --primary: 0 0% 9%; --primary-foreground: 0 0% 98%; --secondary: 0 0% 96.1%; --secondary-foreground: 0 0% 9%; --muted: 0 0% 96.1%; --muted-foreground: 0 0% 45.1%; --accent: 0 0% 96.1%; --accent-foreground: 0 0% 9%; --destructive: 0 84.2% 60.2%; --destructive-foreground: 0 0% 98%; --border: 0 0% 89.8%; --input: 0 0% 89.8%; --ring: 0 0% 3.9%; --chart-1: 12 76% 61%; --chart-2: 173 58% 39%; --chart-3: 197 37% 24%; --chart-4: 43 74% 66%; --chart-5: 27 87% 67%; --radius: 0.5rem;
  }
  .dark { --background: 0 0% 3.9%; --foreground: 0 0% 98%; --card: 0 0% 3.9%; --card-foreground: 0 0% 98%; --popover: 0 0% 3.9%; --popover-foreground: 0 0% 98%; --primary: 0 0% 98%; --primary-foreground: 0 0% 9%; --secondary: 0 0% 14.9%; --secondary-foreground: 0 0% 98%; --muted: 0 0% 14.9%; --muted-foreground: 0 0% 63.9%; --accent: 0 0% 14.9%; --accent-foreground: 0 0% 98%; --destructive: 0 62.8% 30.6%; --destructive-foreground: 0 0% 98%; --border: 0 0% 14.9%; --input: 0 0% 14.9%; --ring: 0 0% 83.1%; --chart-1: 220 70% 50%; --chart-2: 160 60% 45%; --chart-3: 30 80% 55%; --chart-4: 280 65% 60%; --chart-5: 340 75% 55%;
  }
}

/* --- Composants utilitaires (réutilisables) --- */
@layer components {
  .container-pg { @apply max-w-6xl mx-auto px-4 sm:px-6; }

  /* Boutons */
  .btn         { @apply inline-flex items-center justify-center px-5 py-2.5 rounded-full font-semibold transition focus:outline-none focus-visible:ring-2 focus-visible:ring-brand disabled:opacity-50 disabled:pointer-events-none; }
  .btn-primary { @apply btn bg-brand text-white hover:bg-indigo-600 shadow-soft; }
  .btn-accent  { @apply btn bg-accent text-white hover:bg-orange-500 shadow-soft; }
  .btn-ghost   { @apply btn bg-white text-gray-900 border border-gray-200 hover:bg-gray-50; }
  .btn-outline { @apply btn bg-transparent text-gray-900 border border-gray-300 hover:bg-gray-50 dark:text-gray-100 dark:border-white/20; }

  /* Cartes & badges */
  .card      { @apply rounded-2xl bg-white/90 dark:bg-white/10 border border-gray-200 dark:border-white/20 shadow-card; }
  .badge-stk { @apply inline-block rounded-sticker px-3 py-1 text-xs font-semibold bg-emerald-100 text-emerald-700; }

  /* Formulaires */
  .label { @apply block text-sm font-medium mb-1; }
  .help  { @apply text-xs text-gray-500 mt-1; }
  .input, .select, .textarea {
    @apply w-full rounded-xl border border-gray-300 bg-white text-gray-900 dark:bg-gray-800 dark:text-gray-100 dark:border-white/20
           px-3 py-2 outline-none focus:ring-2 focus:ring-brand;
  }

  /* Petites chips (filtres Galerie) */
  .chip { @apply inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm font-medium no-underline cursor-pointer border bg-white text-gray-800 border-gray-200 hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand/60 shadow-sm dark:bg-white dark:text-gray-900 dark:border-white/30 dark:hover:bg-white; }
}

/* --- Accessibilité & motion --- */
.sr-only {
  position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
}
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}
